<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="icon" type="image/png" href="resource/favicon.png" />

    <!-- Bootstrap -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU"
      crossorigin="anonymous"
    />
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@1,600&display=swap" rel="stylesheet">

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro&display=swap"
      rel="stylesheet"
    />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Sora:wght@600&display=swap"
      rel="stylesheet"
    />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter&family=Source+Sans+Pro:wght@400;600&display=swap"
      rel="stylesheet"
    />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:wght@400;600&display=swap"
      rel="stylesheet"
    />

    <!-- custom CSS -->
    <link rel="stylesheet" href="css/style.css" />
    <!-- jquery -->
    <script src="json/jquery-3.6.0.min.js"></script>
    <!-- Vegalite -->
    <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
    <title>World Happiness Visualisation</title>
  </head>
  <body class="vsc-initialized">
    <!-- Header (Title) -->
    <div class="section p-3">
      <div class="container">
        <div class="row bg2">
          <div class="col-12 d-flex justify-content-center">
            <div class="h1 align-middle p-3" id="headline">
              World Happiness Report
            </div>
            <img
              src="resource/happy.svg"
              alt="My Happy SVG"
              class="pt-3"
              width="100px"
              height="100px"
            />
          </div>
        </div>
        <div class="row bg1">
          <div class="col-12 d-flex justify-content-center">
            <div class="span p-4">
              In 2011, the United Nations General Assembly (UNGA) was interested
              in measuring happiness of different countries. From 2012 onwards,
              UNGA has been releasing annual reports on global happiness. The
              report ranks <b>happiness score</b> based on a Cantril ladder
              survey, where nationally representative samples of respondents are
              asked to rate their lives from
              <span class="fw-bold fs-4" style="color: #990000">0</span> to
              <span class="fw-bold fs-4" style="color: #006400">10</span>. A
              decade has passed, and we will explore how happy different
              countries are now through the following visualisations.
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Choropleth Map Section -->
    <div class="section p-3">
      <div class="container">
        <div class="row bg1">
          <div class="col-12">
            <div class="span p-4">
              The following map shows how happy different countires are in
              <b>2021</b>. In general, developed countries that are mostly found
              in <span class="fw-bold">Western Europe</span> or
              <span class="fw-bold">North America</span> are the <span class="fw-bold" style="color: #006400;">happiest</span>. On
              the other hand, under-developed countries in <span class="fw-bold">South Asia</span> and
              <span class="fw-bold">Sub-Saharan Africa</span> are the <span class="fw-bold" style="color: #990000;">saddest</span>.
            </div>
          </div>
          <div class="col-12 d-flex justify-content-center">
            <div id="vis1" class="p-3 w-100"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Scatterplot selection (interactive) -->
    <div class="section p-3">
      <div class="container">
        <div class="row bg2 d-flex justify-content-center p-4">
          <span class="h4 text-center">What <b>factors</b> might possibly be related to happiness? Click on the icons to find out!</span>
        </div>
        <div class="row bg3 p-1">
          <div class="col-2 d-flex justify-content-center">
            <img
              src="resource/gdp.png"
              alt="GDP icon unavailable"
              class="factor-icon"
              id="gdp-icon"
              onclick="toggleScatterPlot('gdp_sp','gdp-icon')"
            />
          </div>
          <div class="col-2 d-flex justify-content-center">
            <img
              src="resource/corruption.png"
              alt="Corruption icon unavailable"
              class="factor-icon"
              id="cor-icon"
              onclick="toggleScatterPlot('corruption_sp','cor-icon')"
            />
          </div>
          <div class="col-2 d-flex justify-content-center">
            <img
              src="resource/freedom.png"
              alt="IFreedom icon unavailable"
              class="factor-icon"
              id="fre-icon"
              onclick="toggleScatterPlot('freedom_sp','fre-icon')"
            />
          </div>
          <div class="col-2 d-flex justify-content-center">
            <img
              src="resource/generosity.png"
              alt="Generosity icon unavailable"
              class="factor-icon"
              id="gen-icon"
              onclick="toggleScatterPlot('generosity_sp','gen-icon')"
            />
          </div>
          <div class="col-2 d-flex justify-content-center">
            <img
              src="resource/growth.png"
              alt="Life expectancy icon unavailable"
              class="factor-icon"
              id="gro-icon"
              onclick="toggleScatterPlot('life_sp','gro-icon')"
            />
          </div>
          <div class="col-2 d-flex justify-content-center">
            <img
              src="resource/social-care.png"
              alt="Social support icon unavailable"
              class="factor-icon"
              id="soc-icon"
              onclick="toggleScatterPlot('social_sp','soc-icon')"
            />
          </div>
        </div>

        <div class="row bg2 p-3 sp" id="gdp_sp">
          <div class="col-sm-12 col-md-4 d-flex justify-content-center">
            <span class="p-3">
              <div class="h3 pb-3 fw-bold"><span class="pop">Rich</span> people are happy!</div>
              The bubble plot shows a <span style="font-style:italic;">high</span> correlation between <b>happiness</b> and
              <b>GDP</b>. This shows that richer countries tend to be happier compared
              to poorer countries.<br><br> For example, <span class="fw-bold" style="color:#5d5d5d;">Western Europe</span> is the richest and also happiest region. Aside from European countries, <span class="fw-bold" style="color:firebrick;">East Asian</span>
              countries such as <span class="fw-bold">Taiwan</span>, <span class="fw-bold">Japan</span> and <span class="fw-bold">South Korea</span> also have very
              good economic production.
            </span>
          </div>
          <div class="col-sm-12 col-md-8 d-flex justify-content-center">
            <div id="vis2a" class="w-100"></div>
          </div>
        </div>

        <div class="row bg2 p-3 sp" id="corruption_sp">
          <div class="col-sm-12 col-md-4 d-flex justify-content-center">
            <span class="p-3">
              <div class="h3 pb-3 fw-bold"><span class="pop">Corruption</span> is everywhere!</div>
              The bubble plot shows a <span style="font-style:italic;">low</span> correlation between <span class="fw-bold">happiness</span> and
              <span class="fw-bold">corruption</span>. No matter how sad or happy a country is, it seems that
              corruption is a prevalent phenomena globally. <br><br>However, there is an
              interesting pattern showing most <span class="fw-bold" style="color:#5d5d5d;">Western Europe</span> countries being
              free from corruption. The biggest surprise would be <span class="fw-bold">Rwanda</span>, a very
              unhappy country who seems to have the <span class="fw-bold">least corruption</span> in the
              world.
            </span>
          </div>
          <div class="col-sm-12 col-md-8 d-flex justify-content-center">
            <div id="vis2b" class="w-100"></div>
          </div>
        </div>

        <div class="row bg2 p-3 sp" id="freedom_sp">
          <div class="col-sm-12 col-md-4 d-flex justify-content-center">
            <span class="p-3">
              <div class="h3 pb-3 fw-bold"><span class="pop">Freedom</span> makes us happy!</div>
              The bubble plot shows a <span style="font-style:italic;">moderate</span> correlation between <span class="fw-bold">happiness</span> and
              <span class="fw-bold">freedom</span> to make life choices. All countries from <span class="fw-bold" style="color:	#C71585;">Southeast Asia</span> 
              seem to have very high level of freedom, <span class="fw-bold">Cambodia</span> in particular
              being the <span class="fw-bold">most free</span> Asian country in the world.<br><br> <p><span class="fw-bold">Afghanistan</span> is not only
              the <span class="fw-bold">unhappiest</span> country, but also the country with <span class="fw-bold">least freedom</span>.
              This may be due to the fact that the extreme military organisation 
              <a href="https://www.nytimes.com/news-event/taliban-afghanistan" class="fw-bold" target="_blank">Taliban</a> has taken over the country this year.</p>
            </span>
          </div>
          <div class="col-sm-12 col-md-8 d-flex justify-content-center">
            <div id="vis2c" class="w-100"></div>
          </div>
        </div>

        <div class="row bg2 p-3 sp" id="generosity_sp">
          <div class="col-sm-12 col-md-4 d-flex justify-content-center">
            <span class="p-3">
              <div class="h3 pb-3 fw-bold">You don't have to be happy to be <span class="pop">generous</span>!</div>

              The bubble plot shows a <span style="font-style:italic;">low</span> correlation between <span class="fw-bold">happiness</span> and
              <span class="fw-bold">generosity</span>. It seems that most countries are quite stingy
              regardless of being happy or sad. <br><br> Interestingly, <span class="fw-bold" style="color:#4169E1;">Central and Eastern European</span>
              countries seem to be <b>less generous</b> than <span class="fw-bold" style="color:	#800000;">African</span> countries who are
              less happier than them. On the other hand, countries with below
              average happiness such as <b>Indonesia</b> and <b>Myanmar</b> are the most
              generous in the world.
            </span>
          </div>
          <div class="col-sm-12 col-md-8 d-flex justify-content-center">
            <div id="vis2d" class="w-100"></div>
          </div>
        </div>

        <div class="row bg2 p-3 sp" id="life_sp">
          <div class="col-sm-12 col-md-4 d-flex justify-content-center">
            <span class="p-3">
              <div class="h3 pb-3 fw-bold">Happy people <span class="pop">live</span> longer!</div>
              The bubble plot shows a <span style="font-style:italic;">high</span> correlation between <span class="fw-bold">happiness</span> and
              <span class="fw-bold">healthy life expectancy</span>. <br><br>All <span class="fw-bold" style="color:	#800000;">Sub-Saharan African</span> countries have
              relatively <b>short healthy life expectancy</b> and low happiness score.
              The only exception is <span class="fw-bold">Mauritius</span> which is by far the happiest
              country from the region with a long healthy life expectancy.
            </span>
          </div>
          <div class="col-sm-12 col-md-8 d-flex justify-content-cente">
            <div id="vis2e" class="w-100 bgwhite"></div>
          </div>
        </div>

        <div class="row bg2 p-3 sp" id="social_sp">
          <div class="col-sm-12 col-md-4 d-flex justify-content-center">
            <span class="p-3">
              <div class="h3 pb-3 fw-bold"><span class="pop">Social support</span> makes people happy!</div>
              The bubble plot shows a <span style="font-style:italic;">high</span> correlation between <span class="fw-bold">happiness</span> and
              <span class="fw-bold">social support</span>. <br><br> Most <span class="fw-bold" style="color:	#800000;">Sub-Saharan African</span> countries lack proper
              social support with the exception of <span class="fw-bold">Mauritius</span>, being on par with
              European countries. This is thanks to <a href="https://theconversation.com/mauritius-heads-into-coronavirus-storm-with-strong-social-welfare-buffers-135702" class="fw-bold" target="_blank">social assistance schemes</a>
              such as universal and free health coverage, free education and
              various other incentives provided by the country.
            </span>
          </div>
          <div class="col-sm-12 col-md-8 d-flex justify-content-center">
            <div id="vis2f" class="w-100"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Boxplot section (Regional happiness) -->
    <div class="section p-3">
      <div class="container">
        <div class="row bg1">
          <div class="col-12 mt-3 mx-3">
            <div class="h1 fw-bold">Happiness in Different Regions</div>
          </div>
          <div class="col-12 m-3">
            The following box plot displays the distribution of happiness among
            different regions. At first glance, we see that <span class="fw-bold" style="color:purple;">South Asian</span>
            countries are the unhappiest while <span class="fw-bold" style="color:#5d5d5d;">Western European</span> countries are
            the happiest. Meanwhile, outliers such as <b>Haiti</b> and <b>Venezuela</b> are
            significantly more unhappy compared to other countries in the same
            region.
          </div>
          <div class="col-12 p-3 d-flex justify-content-center">
            <div id="vis3" class="w-100 p-3"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Bar chart section (Top 10 saddest and happiest countries) -->
    <div class="section p-3">
      <div class="container">
        <div class="row bg2">
          <div class="col-12 mt-3 mx-3">
            <div class="h1 fw-bold">Top 10 Happiest and Saddest Countries</div>
          </div>
          <div class="col-12 m-3">
            <b>New Zealand</b> is the only top 10 happiest country that is not from
            <span class="fw-bold" style="color:#5d5d5d;">Western Europe</span>. On the other hand, the unhappiest country is
            <b>Afghanistan</b>, which is also the only <span class="fw-bold" style="color:purple;">South Asian</span> country that is
            ranked within top 10 unhappiest country in the world.
          </div>
          <div class="col-12 d-flex justify-content-center">
            <div id="vis4" class="w-100 p-3"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Radar chart section -->
    <div class="section p-3">
      <div class="container">
        <div class="row bg1">
          <div class="col-12 mt-3 mx-3">
            <div class="h1 fw-bold">Breaking down Happiest and Saddest Countries</div>
          </div>
          <div class="col-12 mx-3 mt-3">
            <span>
              A representative country from each region has been selected based
              on the bar chart above. We see that happy countries such as
              <b>Finland</b> and <b>New Zealand</b> have low corruption and excellent social
              support, while other unfortunate countries suffer from corruption and low
              quality of life.
              <br><br>
              <span style="color:#6a6a6a;">Use the interactive buttons and legends to filter out countries and compare their factors.</span> 
            </span>
          </div>
          <div class="col-12 p-3">
            <div class="p-3">
              <div
                class="flourish-embed flourish-radar"
                data-src="visualisation/7408433"
              >
                <script src="https://public.flourish.studio/resources/embed.js"></script>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Line chart section -->
    <div class="section p-3">
      <div class="container">
        <div class="row bg2">
          <div class="col-12 mt-3 mx-3">
            <div class="h1 fw-bold">Always <span style="color:#006400;">Happy</span>? Always <span style="color: #990000;">Sad</span>?</div>
          </div>
          <div class="col-12 px-3 mx-3 mt-3">
            <span>
              So far, we have only seen happiness data from <b>2021</b>. Let us
              explore how different countries experienced happiness from the
              last 15 years. We see that <span class="fw-bold">happy countries usually stay happy</span>,
              whereas most <b>unhappy countries fluctuate but never manage to
              surpass the average happiness level.</b>
              From the line chart, <span class="fw-bold" style="color:firebrick;">Jordan</span> experienced the <span class="fw-bold" style="color:firebrick;">harshest drop</span> in
              happiness while <span class="fw-bold" style="color:green;">Latvia</span> and <span class="fw-bold" style="color:green;">Bulgaria</span> are the only countries that managed to
              become <span class="fw-bold" style="color:green;">significantly happier</span>. 

              <br><br><span style="color:#6a6a6a;">Use the interactive buttons to view the countries either by scores through a <b>line chart</b>, or by rank through a <b>bump chart</b>. Hover over the lines to filter and select countries.</span>
            </span>
          </div>
          <div class="col-12 p-3">
            <div class="p-3">
              <div
              class="flourish-embed flourish-chart"
              data-src="visualisation/7417397"
            >
              <script src="https://public.flourish.studio/resources/embed.js"></script>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Line chart section -->
    <div class="section p-3">
      <div class="container">
        <div class="row bg1">
          <div class="col-12 mt-3 mx-3">
            <div class="h1 fw-bold">Overall Happiness Throughout the Years</div>
          </div>
          <div class="col-12 mx-3 mt-3">
            <span class="">
              <p>
                From a bigger picture, it seems that the happiness levels is
                very <b>consistent</b>. No matter what timeframe is selected, the
                average happiness does not seem to vary too much for each region. Although countries ranking seem to shift quite a bit, the general top 20 <span class="fw-bold" style="color:#006400;">happiest</span> countries remains more or less the same throughout the years.
              </p>
              <p style="color: #5d5d5d;">
                The following interactive <b>line chart</b> allows brushing to view the
                average happiness between different regions and countries based on a selected
                timeframe. The average happiness will be reflected on both <b>bar charts</b>.
              </p>
            </span>
          </div>
          <div class="col-10 p-4 d-flex justify-content-center">
            <div id="vis5" class="w-100"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Conclusion section -->
    <div class="section p-3">
      <div class="container">
        <div class="row bg2">
          <div class="col-12 mt-3 mx-3">
            <div class="h1 fw-bold">Conclusion</div>
          </div>
          <div class="col-12 m-3 px-3 pb-4">
            <span class="pr-3 pb-5">
              Overall, we see that global happiness is fairly consistent
              throughout the years where well-developed countries stay happy. On the other hand, it is quite disheartening to see how under-developed countries struggle to be happy. Hopefully, everyone can be happy one day!
            </span>
          </div>
          <div class="col-12 pb-4 text-center">
            <img
            src="resource/world.svg"
            alt="World Happy SVG"
            class="pt-3"
            width="200px"
            height="200px"
          />
          </div>
        </div>
      </div>
    </div>

      
    <!-- Footer -->
    <footer class="text-center position-relative">
        <p class="lead pt-5">Copyright &copy; 2021 Eu Jia Xin</p>
        <a href="#" class="position-absolute bottom-0 end-0">
          <i class="bi bi-arrow-up-circle h1"></i>
        </a>
    </footer>

    <!-- Change slelect -->
    <script type="text/javascript">
      console.log("hi");
      $("select").each(function () {
        console.log($this);
        $(this).addClass("form-select");
      });
    </script>
    <!-- Vegalite Embeds -->
    <script type="text/javascript">
      var vis1 = "json/choropleth.vl.json";
      vegaEmbed("#vis1", vis1)
        .then(function (result) {
          // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
        })
        .catch(console.error);

      var vis2a = "json/scatterplot_gdp.vl.json";
      vegaEmbed("#vis2a", vis2a)
        .then(function (result) {
          // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
        })
        .catch(console.error);

      var vis2b = "json/scatterplot_corruption.json";
      vegaEmbed("#vis2b", vis2b)
        .then(function (result) {
          // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
        })
        .catch(console.error);

      var vis2c = "json/scatterplot_freedom.json";
      vegaEmbed("#vis2c", vis2c)
        .then(function (result) {
          // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
        })
        .catch(console.error);

      var vis2d = "json/scatterplot_generosity.json";
      vegaEmbed("#vis2d", vis2d)
        .then(function (result) {
          // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
        })
        .catch(console.error);

      var vis2e = "json/scatterplot_life.vl.json";
      vegaEmbed("#vis2e", vis2e)
        .then(function (result) {
          // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
        })
        .catch(console.error);

      var vis2f = "json/scatterplot_socialsupport.json";
      vegaEmbed("#vis2f", vis2f)
        .then(function (result) {
          // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
        })
        .catch(console.error);

      // TODO: Add remaining scatterplot and figure out logic

      var vis3 = "json/boxplot.vl.json";
      vegaEmbed("#vis3", vis3)
        .then(function (result) {
          // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
        })
        .catch(console.error);

      var vis4 = "json/barchart.json";
      vegaEmbed("#vis4", vis4)
        .then(function (result) {
          // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
        })
        .catch(console.error);

      var vis5 = "json/multiview-three.json";
      vegaEmbed("#vis5", vis5)
        .then(function (result) {
          // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
        })
        .catch(console.error);
    </script>

    <!-- Custom scripts -->
    <script type="text/javascript" src="json/scripts.js"></script>

    <!-- Bootstrap (Popper) -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
