<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="icon" type="image/png" href="resource/favicon.png" />

    <!-- Bootstrap -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU"
      crossorigin="anonymous"
    />
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Sora:wght@600&display=swap"
      rel="stylesheet"
    />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter&family=Source+Sans+Pro:wght@400;600&display=swap"
      rel="stylesheet"
    />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:wght@400;600&display=swap"
      rel="stylesheet"
    />

    <!-- custom CSS -->
    <link rel="stylesheet" href="css/style.css" />
    <!-- jquery -->
    <script src="json/jquery-3.6.0.min.js"></script>
    <!-- Vegalite -->
    <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
    <title>World Happiness Visualisation</title>
  </head>
  <body class="vsc-initialized">
    <!-- Header (Title) -->
    <div class="section p-3">
      <div class="container">
        <div class="row bg2">
          <div class="col-12 d-flex justify-content-center">
            <div class="h1 align-middle p-3" id="headline">
              World Happiness Report
            </div>
            <img
              src="resource/happy.svg"
              alt="My Happy SVG"
              class="pt-3"
              width="100px"
              height="100px"
            />
          </div>
        </div>
        <div class="row bg1">
          <div class="col-12 d-flex justify-content-center">
            <div class="span p-4">
              In 2011, the United Nations General Assembly (UNGA) was interested
              in measuring happiness of different countries. From 2012 onwards,
              UNGA has been releasing annual reports on global happiness. The
              report ranks happiness score based on a Cantril ladder survey,
              where nationally representative samples of respondents are asked
              to rate their lives from 0 to 10. A decade has passed, and we will
              explore how happy different countries are now through the
              following visualisations.
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Choropleth Map Section -->
    <div class="section p-3">
      <div class="container">
        <div class="row bg1">
          <div class="col-12">
            <div class="span p-4">
              The following map shows how happy different countires are in 2021.
              In general, developed countries that are mostly found in Western
              Europee or North America are the happiest. On the other hand,
              under-developed countries in South Asia and Sub-Saharan Africa are
              much sadder.
            </div>
          </div>
          <div class="col-12 d-flex justify-content-center">
            <div id="vis1" class="pb-3"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Scatterplot selection (interactive) -->
    <div class="section p-3">
      <div class="container">
        <div class="row bg2 d-flex justify-content-center p-4">
          Click on the following icons to view the correlation between happiness
          and 6 other factors
        </div>
        <div class="row bg3 p-1">
          <div class="col-2 d-flex justify-content-center">
            <img
              src="resource/gdp.png"
              alt="GDP icon unavailable"
              class="factor-icon"
              id="gdp-icon"
              onclick="toggleScatterPlot('gdp_sp','gdp-icon')"
            />
          </div>
          <div class="col-2 d-flex justify-content-center">
            <img
              src="resource/corruption.png"
              alt="Corruption icon unavailable"
              class="factor-icon"
              id="cor-icon"
              onclick="toggleScatterPlot('corruption_sp','cor-icon')"
            />
          </div>
          <div class="col-2 d-flex justify-content-center">
            <img
              src="resource/freedom.png"
              alt="IFreedom icon unavailable"
              class="factor-icon"
              id="fre-icon"
              onclick="toggleScatterPlot('freedom_sp','fre-icon')"
            />
          </div>
          <div class="col-2 d-flex justify-content-center">
            <img
              src="resource/generosity.png"
              alt="Generosity icon unavailable"
              class="factor-icon"
              id="gen-icon"
              onclick="toggleScatterPlot('generosity_sp','gen-icon')"
            />
          </div>
          <div class="col-2 d-flex justify-content-center">
            <img
              src="resource/growth.png"
              alt="Life expectancy icon unavailable"
              class="factor-icon"
              id="gro-icon"
              onclick="toggleScatterPlot('life_sp','gro-icon')"
            />
          </div>
          <div class="col-2 d-flex justify-content-center">
            <img
              src="resource/social-care.png"
              alt="Social support icon unavailable"
              class="factor-icon"
              id="soc-icon"
              onclick="toggleScatterPlot('social_sp','soc-icon')"
            />
          </div>
        </div>

        <div class="row bg2 p-3 sp" id="gdp_sp">
          <div class="col-sm-12 col-md-4 d-flex justify-content-center">
            <span class="p-3">
              <div class="h3">Rich people are happy!</div>
              The bubble plot shows a high correlation between happiness and
              GDP. This shows that richer countries tend to be happier compared
              to poorer countries. For example, Western Europe is the richest
              and also happist region. Aside from European countries, East Asian
              countries such as Taiwan, Japan and South Korea also have very
              good economic production.
            </span>
          </div>
          <div class="col-sm-12 col-md-8 d-flex justify-content-center">
            <div id="vis2a" class="w-100"></div>
          </div>
        </div>

        <div class="row bg2 p-3 sp" id="corruption_sp">
          <div class="col-sm-12 col-md-4 d-flex justify-content-center">
            <span class="p-3">
              <div class="h3">Corruption is everywhere!</div>
              The bubble plot shows a low correlation between happiness and
              corruption. No matter how sad or happy a country is, it seems that
              corruption is a prevalent phenomena globally. However, there is an
              interesting pattern showing most Western European countries being
              free from corruption. The biggest surprise would be Rwanda, a very
              unhappy country who seems to have the least corruption in the
              world.
            </span>
          </div>
          <div class="col-sm-12 col-md-8 d-flex justify-content-center">
            <div id="vis2b" class="w-100"></div>
          </div>
        </div>

        <div class="row bg2 p-3 sp" id="freedom_sp">
          <div class="col-sm-12 col-md-4 d-flex justify-content-center">
            <span class="p-3">
              <div class="h3">Freedom brings happiness!</div>
              The bubble plot shows a moderate correlation between happiness and
              freedom to make life choices. All countries from Southeast Asia
              seem to have very high level of freedom, Cambodia in particular
              being the most free country in the world. Afghanistan is not only
              the unhappiest country, but also the country with least freedom.
              This may be due to the fact that the extreme military organisation
              Taliban has taken over the country this year.
            </span>
          </div>
          <div class="col-sm-12 col-md-8 d-flex justify-content-center">
            <div id="vis2c" class="w-100"></div>
          </div>
        </div>

        <div class="row bg2 p-3 sp" id="generosity_sp">
          <div class="col-sm-12 col-md-4 d-flex justify-content-center">
            <span class="p-3">
              <div class="h3">You don't have to be happy to be generous!</div>

              The bubble plot shows a low correlation between happiness and
              generosity. It seems that most countries are quite stingy
              regardless of being happy or sad. Interestingly, European
              countries seem to be less generous than African countries who are
              less happier than them. On the other hand, countries with below
              average happiness such as Indonesia and Myanmar are the most
              generous in the world.
            </span>
          </div>
          <div class="col-sm-12 col-md-8 d-flex justify-content-center">
            <div id="vis2d" class="w-100"></div>
          </div>
        </div>

        <div class="row bg2 p-3 sp" id="life_sp">
          <div class="col-sm-12 col-md-4 d-flex justify-content-center">
            <span class="p-3">
              <div class="h3">Happy people live longer!</div>
              The bubble plot shows a high correlation between happiness and
              healthy life expectancy. All Sub-Saharan African countries have
              relatively short healthy life expectancy and low happiness score.
              The only exception is Mauritius which is by far the happiest
              country from the region with a long healthy life expectancy.
            </span>
          </div>
          <div class="col-sm-12 col-md-8 d-flex justify-content-center">
            <div id="vis2e" class="w-100"></div>
          </div>
        </div>

        <div class="row bg2 p-3 sp" id="social_sp">
          <div class="col-sm-12 col-md-4 d-flex justify-content-center">
            <span class="p-3">
              <div class="h3">Social support makes people happy!</div>
              The bubble plot shows a high correlation between happiness and
              social support. Most Sub-Saharan African countires lack proper
              social support with the exception of Mauritius, being on par with
              European countries. This is thanks to social assistance schemes
              such as universal and free health coverage, free education and
              various other incentives provided by the country.
            </span>
          </div>
          <div class="col-sm-12 col-md-8 d-flex justify-content-center">
            <div id="vis2f" class="w-100"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Boxplot section (Regional happiness) -->
    <div class="section p-3">
      <div class="container">
        <div class="row bg1">
          <div class="col-12 mt-3 mx-3">
            <div class="h1">Regional Happiness</div>
          </div>
          <div class="col-12 m-3">
            The following box plot displays the distribution of happiness among
            different regions. At first glance, we see that South Asian
            countries are the unhappiest while Western European countries are
            the happiest. Meanwhile, outliers such as Haiti and Venezuela are
            significantly more unhappy compared to other countries in the same
            region.
          </div>
          <div class="col-12 p-3 d-flex justify-content-center">
            <div id="vis3"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Bar chart section (Top 10 saddest and happiest countries) -->
    <div class="section p-3">
      <div class="container">
        <div class="row bg2">
          <div class="col-12 mt-3 mx-3">
            <div class="h1">Top 10 Happiest and Saddest Countries</div>
          </div>
          <div class="col-12 m-3">
            New Zealand is the only top 10 happiest country that is not from
            Western Europe. On the other hand, the unhappiest country is
            Afghanistan, which is also the only South Asian country that is
            ranked within top 10 unhappiest country in the world.
          </div>
          <div class="col-12 d-flex justify-content-center">
            <div id="vis4"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Radar chart section -->
    <div class="section p-3">
      <div class="container">
        <div class="row bg1">
          <div class="col-12 mt-3 mx-3">
            <div class="h1">Breaking down Happiest and Saddest Countries</div>
          </div>
          <div class="col-12 m-3">
            <span>
              A representative country from each region has been selected based
              on the bar chart above. We see that happy countries such as
              Finland and New Zealand have low corruption and excellent social
              support, while other countries suffer from corruption and low
              quality of life.
            </span>
          </div>
          <div class="col-12">
            <div
              class="flourish-embed flourish-radar"
              data-src="visualisation/7408433"
            >
              <script src="https://public.flourish.studio/resources/embed.js"></script>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Line chart section -->
    <div class="section p-3">
      <div class="container">
        <div class="row bg2">
          <div class="col-12 mt-3 mx-3">
            <div class="h1">Always Happy? Always Sad?</div>
          </div>
          <div class="col-12 m-3">
            <span class="">
              <p>
                So far, we have only seen happiness data from 2021. Let us explore
                how different countries experienced happiness from the last 15
                years. We see that happy countries usually stay happy, whereas
                most unhappy countries fluctuate but never manage to surpass the
                average happiness level.
              </p> 
              <p>
                From the line chart, Jordan experienced
                the harshest drop in happiness while Latvia is the only country
                that managed to become significantly happier.
              </p>
            </span>
          </div>
          <div class="col-12">
              <div
              class="flourish-embed flourish-chart p-3"
              data-src="visualisation/7417397"
            >
              <script src="https://public.flourish.studio/resources/embed.js"></script>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Line chart section -->
    <div class="section p-3">
      <div class="container">
        <div class="row bg1">
          <div class="col-12 mt-3 mx-3">
            <div class="col-12 mt-3 mx-3">
              <div class="h1">Overall Happiness Throughout the Years</div>
            </div>
            <div class="col-12 m-3">
              <span class="">
                <p>
                  The following interactive line chart allows brushing to view the average happiness between different regions based on a selected timeframe. The average happiness will be reflected on the bar chart.
                </p> 
                <p>
                  From a bigger picture, it seems that the happiness levels is very consistent. No matter what timeframe is selected, the average happiness does not seem to vary too much.
                </p>
              </span>
            </div>
          <div class="col-12 d-flex justify-content-center">
            <div id="vis5"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Conclusion section -->
    <div class="section p-3">
      <div class="container">
        <div class="row bg2">
          <div class="col-12 mt-3 mx-3">
            <div class="h1">Conclusion</div>
          </div>
          <div class="col-12 m-3">
            <span>
              Overall, we see that happiness levels have stayed fairly consistent globally. This is quite disheartening as less developed countries have been struggling to be happier for a long time. Hopefully, one day everyone can be happy!
            </span>
          </div>
        </div>
      </div>
    </div>

    <!-- Change slelect -->
    <script type="text/javascript">
      console.log("hi");
      $("select").each(function () {
        console.log($this);
        $(this).addClass("form-select");
      });
    </script>
    <!-- Vegalite Embeds -->
    <script type="text/javascript">
      var vis1 = "json/choropleth.vl.json";
      vegaEmbed("#vis1", vis1)
        .then(function (result) {
          // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
        })
        .catch(console.error);

      var vis2a = "json/scatterplot_gdp.vl.json";
      vegaEmbed("#vis2a", vis2a)
        .then(function (result) {
          // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
        })
        .catch(console.error);

      var vis2b = "json/scatterplot_corruption.json";
      vegaEmbed("#vis2b", vis2b)
        .then(function (result) {
          // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
        })
        .catch(console.error);

      var vis2c = "json/scatterplot_freedom.json";
      vegaEmbed("#vis2c", vis2c)
        .then(function (result) {
          // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
        })
        .catch(console.error);

      var vis2d = "json/scatterplot_generosity.json";
      vegaEmbed("#vis2d", vis2d)
        .then(function (result) {
          // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
        })
        .catch(console.error);

      var vis2e = "json/scatterplot_life.vl.json";
      vegaEmbed("#vis2e", vis2e)
        .then(function (result) {
          // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
        })
        .catch(console.error);

      var vis2f = "json/scatterplot_socialsupport.json";
      vegaEmbed("#vis2f", vis2f)
        .then(function (result) {
          // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
        })
        .catch(console.error);

      // TODO: Add remaining scatterplot and figure out logic

      var vis3 = "json/boxplot.vl.json";
      vegaEmbed("#vis3", vis3)
        .then(function (result) {
          // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
        })
        .catch(console.error);

      var vis4 = "json/barchart.json";
      vegaEmbed("#vis4", vis4)
        .then(function (result) {
          // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
        })
        .catch(console.error);

      var vis5 = "json/multiview_bar_line.vl.json";
      vegaEmbed("#vis5", vis5)
        .then(function (result) {
          // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
        })
        .catch(console.error);
    </script>

    <!-- Custom scripts -->
    <script type="text/javascript" src="json/scripts.js"></script>

    <!-- Bootstrap (Popper) -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
